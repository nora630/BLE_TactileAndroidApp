package com.onodera.BleApp.template;

public class LowPassFilter {
    private float[] in1 = new float[60];
    private float[] h = {
            -2.07086E-19f,
            -0.000187578f,
            -0.000414754f,
            -0.000707586f,
            -0.001085391f,
            -0.001555543f,
            -0.002108936f,
            -0.002716623f,
            -0.00332809f,
            -0.003871493f,
            -0.00425602f,
            -0.004376372f,
            -0.004119166f,
            -0.003370864f,
            -0.002026712f,
            1.39783E-18f,
            0.002769051f,
            0.006305537f,
            0.010593934f,
            0.015574552f,
            0.021142809f,
            0.027151543f,
            0.033416361f,
            0.039723792f,
            0.045841797f,
            0.051531984f,
            0.056562746f,
            0.060722454f,
            0.063831783f,
            0.065754348f,
            0.066404873f,
            0.065754348f,
            0.063831783f,
            0.060722454f,
            0.056562746f,
            0.051531984f,
            0.045841797f,
            0.039723792f,
            0.033416361f,
            0.027151543f,
            0.021142809f,
            0.015574552f,
            0.010593934f,
            0.006305537f,
            0.002769051f,
            1.39783E-18f,
            -0.002026712f,
            -0.003370864f,
            -0.004119166f,
            -0.004376372f,
            -0.00425602f,
            -0.003871493f,
            -0.00332809f,
            -0.002716623f,
            -0.002108936f,
            -0.001555543f,
            -0.001085391f,
            -0.000707586f,
            -0.000414754f,
            -0.000187578f,
            -2.07086E-19f,

    };

    public  float firFilter(float input) {
        float output = 0;
        for (int i=0; i<h.length; i++){
            if(i==0) output += h[i] * input;
            else output += h[i] * in1[h.length-1-i];
        }
        float tmp1 = 0, tmp2 = 0;
        for (int i=0; i<h.length-1; i++){
            if(i==0){
                tmp1 = in1[h.length-2];
                in1[h.length-2] = input;
            } else {
                tmp2 = in1[h.length-2-i];
                in1[h.length-2-i] = tmp1;
                tmp1 = tmp2;
            }
        }
        return output;
    }
}
